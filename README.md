# アプリケーション名
THREAD  
<br>

# アプリケーション概要
LINEアプリと連携して毎日メッセージが届き安否確認をする  
日記投稿ができる
いいね機能実装
<br>

# URL
https://thread-app-38082.herokuapp.com/  
<br>


# テスト用アカウント
- Basic認証ID : ”KIU"
- Basic認証パスワード : "5211"
- メールアドレス : test@test
- パスワード : 111aaa  
<br>

# 利用方法
### LINE公式アカウントをフレンド登録する
***
1. トップページでQRコードを読み込みフレンド登録をする
2. メッセージのURLに飛び、ユーザー登録をする

### 日記の投稿
***
1. ログインする
2. 日記新規投稿ボタンから日記を投稿する
3. マイページで確認する  
<br>

# アプリケーションを作成した背景
このアプリはメッセージアプリ「LINE」と連携して、誰かと繋がっている安心感が欲しいという人の課題を解決するために作成しました。
一人暮らしをしている人は、孤独死への不安を持ち、いつ自分の身に何が起こるかわからない不安と共に生活しています。
特に、コロナ禍で孤独を感じる人が増えたのではないかと感じました。
そこで、身近なLINEというアプリから日々メッセージが届き、日記を投稿するといいねがもらえる機能を実装しました。
このアプリを通して、コロナ禍という時代が生んだ孤独から生きる希望を見出して欲しいと考え、開発しました。

# 洗い出した要件
[要件を定義したシート](https://docs.google.com/spreadsheets/d/1qjAYbKSrR3WXR6txBWmN_1iuw8PXPWS0Mu-ACh17iSg/edit?usp=sharing)  
<br>


# 実装した機能についての画像やGIFおよびその説明
[![Image from Gyazo](https://i.gyazo.com/a0f5a88128e2aa626cb97ba91f0c0739.png)](https://gyazo.com/a0f5a88128e2aa626cb97ba91f0c0739)

LINEでフレンド登録をすると通知が届きます  
「こちらです」のボタンを押すと新規登録ページに遷移します。  

[![Image from Gyazo](https://i.gyazo.com/0cb9addee459cfd1223c0310c5a14003.png)](https://gyazo.com/0cb9addee459cfd1223c0310c5a14003)

メッセージを送ると応答メッセージが返されるようになっています。  
<br>
[![Image from Gyazo](https://i.gyazo.com/da3090a52307b20db179dc4da273e99a.png)](https://gyazo.com/da3090a52307b20db179dc4da273e99a)

毎日このような通知が届き、OKボタンを押すとOKとメッセージが送信され応答メッセージが届きます。  
<br>


# 実装予定の機能
安否確認ができる機能を実装予定。
LINEメッセージに一定期間応答がないことを開発者が把握できるような設計を目指しています。
安否確認機能を実装することで、利用者のもしもの時に緊急連絡先に連絡をするなどの対応をとることができます。

<br>

# データベース設計

[![Image from Gyazo](https://i.gyazo.com/2295aef5b62ac9c45ea445b2f4bcbd08.png)](https://gyazo.com/2295aef5b62ac9c45ea445b2f4bcbd08)  



# 画面遷移図

[![Image from Gyazo](https://i.gyazo.com/870e77eec7199132c45e359cd818963c.png)](https://gyazo.com/870e77eec7199132c45e359cd818963c)

# 開発環境
- フロントエンド HTML, CSS
- バックエンド Ruby on rails, javascript
- テスト spec
- テキストエディタ VScode
- タスク管理 GitHub

# 工夫したポイント
### LINE messaging API
***
（概要（現段階））  
- 公式アカウントをフレンド登録すると、サーバーにLINEのユーザーIDが保存されます。アプリにはサイトの新規登録画面に遷移するURLを含んだメッセージが届きます
- メッセージを送ると応答メッセージが届きます
- 毎日18時になるとメッセージが届き、OKボタンを押すと自動でOKとメッセージが送信され、「確認いたしました」と応答メッセージが返ってきます
- 公式アカウントをブロックまたは削除するとサーバーのID情報も消滅し、メッセージは届かなくなります  
<br>

（導入した背景）   
 テックキャンプのカリキュラムでは学習しなかった内容に挑戦したいと思い、  
今回のオリアプではLINE messaging API の導入を決めました。  
<br>

（苦労した点）  
自分の知識の無さに最も苦労しました。オンライン学習である程度の知識を得られましたが、実際にサイトで情報を収集していると馴染みのない単語やコードが多くあり、読み解くことから始まったからです。

何度も試作アプリを作り、上手くいった時は本アプリに導入することを続けました。根気よく続けていると、だんだんとコードの意味を理解しアプリに合うようにコードを書くことができるようになりました。

<br>


### 　公開非公開機能
***
(概要)
- 日記投稿時に、公開か非公開かの選択が可能
- 非公開とした日記は他ユーザーからは見られません

(導入した背景)  
日記投稿機能を実装しようと考えた際に、日記は見られたくないものも存在するはずだと思い、このような実装を計画しました

(苦労した点)
非公開投稿が他ユーザーに表示されないよう実装することが大変でした。
インデックスやマイページだけでなく、詳細ページなどにもURLで遷移しないように条件式を取り入れました。
アクティブハッシュで公開/非公開を分けていたので、if文の条件式をどのようにするか悩みましたが、自分なりに実装することができました。


