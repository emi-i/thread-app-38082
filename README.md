# アプリケーション名
THREAD  
<br>

# アプリケーション概要
- LINEでログイン
- LINEアプリ用QRコードから友達登録をすることで、LINEアカウント上に毎日メッセージが届く
- アプリ上で日記投稿をすると、『いいね』が付けられる
- LINEアカウント上に届いたメッセージに対して、二日間ユーザーからの返答がなければ、該当ユーザー情報がEmergencyListに保存される。
<br>

# URL
https://thread-app-38082.herokuapp.com/  
<br>


# テスト用アカウント
- Basic認証ID : ”KIU"
- Basic認証パスワード : "5211"
- メールアドレス : test@test
- パスワード : 111aaa  
<br>

# 利用方法
### LINEでメッセージを受け取る
***
1. 新規登録ボタンからLINEログインをする
2. LINE用QRコードを読み込み、「THREAD」を友達追加する
3. 送られてきたメッセージの[こちらです]をクリックするとユーザー登録完了ページに遷移
4. LINEアプリ上でメッセージを送るとメッセージが届く

※マイページで退会ボタンを押すとLINEのID情報ごとデータから削除されます。以降メッセージは届きません。  
<br>


### 日記を投稿する
***
1. アプリ上のトップページのヘッダーにある「ログイン」をクリック
2. 「日記新規投稿」ボタンをクリックし、投稿内容を入力する
3. Releaseを変更することで、日記の公開範囲を公開/非公開に設定できます
3. [POST]ボタンをクリックし、日記一覧ページに遷移する
4. マイページ上に日記が表示されていれば完了  
<br>

### 安否確認する
***
1. 毎日18時になるとLINEアプリ上に「THREAD」からメッセージが届く
2. 「THREAD」からのメッセージにあるOKボタンを押すと、自動で『OK』とメッセージが送信され、『確認いたしました』と応答メッセージが返ってくる
3. 「THREAD」からのメッセージのOKボタンを二日間押さなかった場合、該当ユーザー情報がEmergencyListに保存される。
<br>

# アプリケーションを作成した背景
このアプリはメッセージアプリ「LINE」と連携して、誰かと繋がっている安心感が欲しいという人の課題を解決するために作成しました。
一人暮らしをしている人は、孤独死への不安を持ち、いつ自分の身に何が起こるかわからない不安と共に生活しています。
特に、コロナ禍で孤独を感じる人が増えたのではないかと感じました。  
そこで、身近なLINEというアプリから日々メッセージが届き、メッセージに返答がなければ緊急連絡先に連絡をする安否確認機能を実装しました。 
また、日記を投稿すると「いいね」がもらえる機能を実装し、アプリ上で誰かと繋がっている安心感を提供しようと考えました。  
このアプリを通して、コロナ禍という時代が生んだ孤独から生きる希望を見出して欲しいと考え、開発しました。  
<br>

# 洗い出した要件
[要件を定義したシート](https://docs.google.com/spreadsheets/d/1qjAYbKSrR3WXR6txBWmN_1iuw8PXPWS0Mu-ACh17iSg/edit?usp=sharing)  
<br>


# 実装した機能についての画像やGIFおよびその説明

### LINEでメッセージを受け取れる
***

[![Image from Gyazo](https://i.gyazo.com/ec34b647a9df7c19546f5d584934a6c4.png)](https://gyazo.com/ec34b647a9df7c19546f5d584934a6c4)

LINEログインをすることで、サイトのユーザーとLINE IDが連携されます  
QRコードで友達登録をすると登録完了ページに遷移するボタンがメッセージで届きます  


[![Image from Gyazo](https://i.gyazo.com/338a95fa0ca048635af3a8a861475dc7.png)](https://gyazo.com/338a95fa0ca048635af3a8a861475dc7)

メッセージを送ると応答メッセージが返されるようになっています  
<br>

### 日記を投稿する
***
[![Image from Gyazo](https://i.gyazo.com/700253c72f5e2cd1b0ee6283291ddc50.png)](https://gyazo.com/700253c72f5e2cd1b0ee6283291ddc50)

投稿画面でフォームに情報を入力すると日記が投稿できます  
Releaseで公開/非公開を設定で来ます  
<br>

### 安否確認する
***

[![Image from Gyazo](https://i.gyazo.com/da3090a52307b20db179dc4da273e99a.png)](https://gyazo.com/da3090a52307b20db179dc4da273e99a)

毎日18時になるとLINEアプリ上にメッセージが届きます。OKボタンを押すと自動で「OK」とメッセージが送信されます  
「THREAD」から『確認いたしました』と応答メッセージが来て、安否確認が完了します  
<br>


# 実装予定の機能
安否確認ができる機能を実装予定です。
LINEメッセージに一定期間応答がないことを開発者が把握できるような設計を目指しています。
安否確認機能を実装することで、利用者のもしもの時に緊急連絡先に連絡をするなどの対応をとることができます。

<br>

# データベース設計

[![Image from Gyazo](https://i.gyazo.com/b689c50b93687de35968abbaa65aa225.png)](https://gyazo.com/b689c50b93687de35968abbaa65aa225)


# 画面遷移図

[![Image from Gyazo](https://i.gyazo.com/870e77eec7199132c45e359cd818963c.png)](https://gyazo.com/870e77eec7199132c45e359cd818963c)

# 開発環境
- フロントエンド HTML, CSS
- バックエンド Ruby on rails, javascript
- テスト spec
- テキストエディタ VScode
- タスク管理 GitHub  
<br>

# 工夫したポイント
### LINE messaging API
***

（導入した背景）   
テックキャンプでの学習はカリキュラムの内容に沿って進めていく学習スタイルのため、0から新しい機能の導入に挑戦したいと考えました。
今回の安否確認アプリは世の中に広く普及されることを目的として作成したので、連絡手段として広く認知されるLINEアプリとの連携が最適だと考え導入しました。
<br>

（苦労した点）  
LINE messaging APIを導入するにあたり、自分の知識の少なさを実感しました。テックキャンプでのプログラミング学習で人生初のアプリ実装を一通り経験し、初めて扱う機能や言語もきっと導入できるのではと考えました。
しかし、0から自分で情報収集をしてみると馴染みのない単語やコードばかりで、読み解くだけで1日が終わった日もありました。
心が折れそうになることもありましたが、コロナ渦で不安を抱える人達の役に立ちたいという思いから、試行錯誤を続けてLINE messaging APIを導入させることができました。

<br>


### 　日記の公開範囲設定
***
(概要)
- 日記投稿時に、公開か非公開かの選択が可能
- 非公開とした日記は他ユーザーからは閲覧不可

(導入した背景)  
日記投稿機能を構想した時に、TwitterなどのSNSは鍵付きアカウントや公開範囲設定ができることから、誰かと繋がる場においては「発信したい情報」と「自分だけの秘密にしたい情報」があると考えました。そこで、日記に公開範囲を設定できるように実装をしました

(苦労した点)  
投稿内容が他のユーザーに非表示にされる点に苦労しました。 トップページやマイページだけでなく、詳細ページに遷移しないように条件式を取り入れました。 アクティブハッシュを用いて、投稿内容の公開設定を分けていたので、if文の条件式をどのように使用するか試行錯誤を重ねました。


